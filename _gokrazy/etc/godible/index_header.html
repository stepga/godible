<!DOCTYPE html>

<style>
</style>

<h1>Lauschkasten</h1>

<form>
	<input id="input-text" type="text">
	<input id="input-button" type="button" value="do sth input (TODO)">
</form>

<script type="text/javascript">

const newpageButton = document.querySelector('#input-button');
const newpageText = document.querySelector('#input-text');

newpageText.addEventListener("keydown", function(event) {
	if (event.keyCode === 13) { // 13 == 0x0d == CR (ASCII) == Enter
		event.preventDefault();
		newpageButton.click();
	}
});

newpageButton.addEventListener('click', click_action);

function click_action() {
	//if (!newpageText.value || newpageText.value.length === 0) {
	//	console.log("input action: nothing to do, value is missing")
	//	return;
	//}
	getData()
}

async function getData() {
  const url = "http://localhost:1234/state";
  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Response status: ${response.status}`);
    }

    const result = await response.json();
    console.log(result);
  } catch (error) {
    console.error(error.message);
  }
}
</script>
